#!/usr/bin/env python3 """ Quick Hugging Face Token Test Tests the provided HF token to ensure it works correctly. """ import requests import os # Your activated token HF_TOKEN = "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" os.environ['HF_TOKEN'] = HF_TOKEN def test_token(): """Test the HF token with a simple API call.""" print(" Testing Hugging Face Token") print("=" * 30) headers = {'Authorization': f'Bearer {HF_TOKEN}'} try: # Test 1: whoami endpoint print(" Testing whoami endpoint...") response = requests.get("https://huggingface.co/api/whoami", headers=headers, timeout=10) print(f"Status Code: {response.status_code}") if response.status_code == 200: data = response.json() print(f" Token works! User: {data.get('name', 'Unknown')}") print(f" Type: {data.get('type', 'Unknown')}") print(f" Email verified: {data.get('emailVerified', 'Unknown')}") # Test 2: List datasets print(f"\n Testing dataset listing...") response2 = requests.get("https://huggingface.co/api/datasets", headers=headers, params={'limit': 5}, timeout=10) if response2.status_code == 200: datasets = response2.json() print(f" Dataset API works! Found {len(datasets)} datasets") # Show first few for i, dataset in enumerate(datasets[:3]): print(f" {i+1}. {dataset.get('id', 'Unknown')}") # Test 3: Specific conversational dataset print(f"\n Testing specific dataset access...") test_datasets = ['lmsys/lmsys-chat-1m', 'OpenAssistant/oasst2'] for dataset_id in test_datasets: response3 = requests.get(f"https://huggingface.co/api/datasets/{dataset_id}", headers=headers, timeout=10) if response3.status_code == 200: dataset_info = response3.json() print(f" {dataset_id}: {dataset_info.get('downloads', 0):,} downloads") elif response3.status_code == 404: print(f" {dataset_id}: Not found") else: print(f" {dataset_id}: Status {response3.status_code}") return True else: print(f" Dataset API failed: {response2.status_code}") return False elif response.status_code == 401: print(f" Token invalid or expired") return False else: print(f" Unexpected response: {response.status_code}") print(f" {response.text[:100]}") return False except Exception as e: print(f" Network error: {e}") return False def test_datasets_library(): """Test if datasets library can use the token.""" print(f"\n Testing datasets library...") try: from datasets import load_dataset_builder # Try to access a dataset that requires authentication print(" Testing dataset builder...") # Set token in environment for datasets library os.environ['HUGGING_FACE_HUB_TOKEN'] = HF_TOKEN try: builder = load_dataset_builder("squad") print(f" Dataset builder works: {builder.info.dataset_name}") return True except Exception as e: print(f" Dataset builder issue: {e}") return False except ImportError: print(" datasets library not installed") return False if __name__ == "__main__": print(" Hugging Face Token Verification") print("Testing your activated token...") print("=" * 40) # Test API access api_works = test_token() # Test datasets library datasets_works = test_datasets_library() print(f"\n Results Summary:") print(f" API Access: {' Working' if api_works else ' Failed'}") print(f" Datasets Library: {' Working' if datasets_works else ' Failed'}") if api_works: print(f"\n Your token is working correctly!") print(f" You can now run the real HF ingestion scripts") print(f" Try: python examples/real_huggingface_ingestion.py") else: print(f"\n Token issues detected") print(f" Check network connection and token permissions")